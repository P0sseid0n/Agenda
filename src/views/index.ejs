<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Inicio</title>

		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>
	</head>
	<body>
		<header class="p-3 bg-dark text-white">
			<div class="container">
				<div class="d-flex flex-wrap align-items-center justify-content-between">
					<a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
						<h2>Agenda</h2>
					</a>

					<div class="text-end">
						<a href="/profile" style="font-weight: bold" type="button" class="btn btn-secondary px-4" role="button">
							<% if (logged) { %> Perfil <% } else { %> Entrar <% } %>
						</a>
					</div>
				</div>
			</div>
		</header>
		<div class="container pt-5">
			<div class="d-flex align-items-center justify-content-between">
				<h3 class="mt-3">Lista de contatos</h3>
				<% if (logged) { %>
				<a href="/contact" class="btn mt-3 btn-dark">Adicionar contato</a>
				<% } %>
			</div>
			<table class="table">
				<thead>
					<tr>
						<th scope="col">#</th>
						<th scope="col">Nome</th>
						<th scope="col">Telefone</th>
						<th scope="col"></th>
					</tr>
				</thead>
				<tbody>
					<% contatos.forEach((contato, index) => { %>
					<tr>
						<th scope="row"><%= index + 1 %></th>
						<td><%= contato.nome %></td>
						<td><%= contato.telefone %></td>
						<td>
							<a href="/contact/<%= contato._id %>" type="button" class="btn btn-success me-3">Editar</a>
							<form style="display: inline-block" action="/deleteContact/<%= contato._id %>" method="post">
								<input type="hidden" name="_csrf" value="<%= csrfToken %>" />
								<button type="submit" class="btn btn-danger">Apagar</button>
							</form>
						</td>
					</tr>
					<% }) %>
				</tbody>
			</table>
		</div>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
			crossorigin="anonymous"
		></script>
	</body>
</html>
